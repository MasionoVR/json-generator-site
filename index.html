<!DOCTYPE html>
<html>
<head>
  <title>Masiono's 444 Json Converter</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: url('R.jpg') no-repeat center center fixed;
      background-size: cover;
      color: white;
      padding: 20px;
    }
    .container {
      max-width: 600px;
      margin: auto;
      background: rgba(30, 30, 30, 0.9);
      padding: 20px;
      border-radius: 10px;
    }
    label, input, select, button {
      width: 100%;
      margin-top: 10px;
      padding: 10px;
      border-radius: 5px;
    }
    .scrollbox {
      max-height: 300px;
      overflow-y: auto;
      border: 1px solid #444;
      padding: 10px;
      background: #1a1a1a;
      border-radius: 5px;
    }
    .scrollbox label {
      display: block;
      margin-bottom: 5px;
    }
    .row {
      display: flex;
      gap: 10px;
      align-items: center;
      margin-top: 10px;
    }
    .row button {
      flex-shrink: 0;
      width: 40px;
      height: 40px;
    }
    #colorPreview {
      width: 100%;
      height: 40px;
      border-radius: 5px;
      background: hsl(0, 0%, 50%);
    }
    #searchInput {
      width: 80%;
      margin: 10px auto;
      display: block;
      font-size: 18px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Masiono's 444 Json Converter</h2>

    <input type="text" id="searchInput" placeholder="Search items..." onkeyup="filterItems()">
    <label>Select Items:</label>
    <div class="scrollbox" id="itemList">
      <!-- BEGIN ITEM LIST -->
      <label><input type="checkbox" value="item_apple"> Apple</label>
      <label><input type="checkbox" value="item_company_ration"> Company Ration</label>
      <label><input type="checkbox" value="item_company_ration_heal"> Company Ration Heal</label>
      <label><input type="checkbox" value="item_cracker"> Cracker</label>
      <label><input type="checkbox" value="item_heart_chocolate_box"> Heart Chocolate Box</label>
      <label><input type="checkbox" value="item_mega_broccoli"> Mega Broccoli</label>
      <label><input type="checkbox" value="item_micro_broccoli"> Micro Broccoli</label>
      <label><input type="checkbox" value="item_pumpkin_pie"> Pumpkin Pie</label>
      <label><input type="checkbox" value="item_stinky_cheese"> Stinky Cheese</label>
      <label><input type="checkbox" value="item_turkey_leg"> Turkey Leg</label>
      <label><input type="checkbox" value="item_turkey_whole"> Turkey Whole</label>
      <label><input type="checkbox" value="item_banana"> Banana</label>
      <label><input type="checkbox" value="item_large_banana"> Large Banana</label>
      <label><input type="checkbox" value="item_cola"> Cola</label>
      <label><input type="checkbox" value="item_large_cola"> Large Cola</label>
      <label><input type="checkbox" value="item_pizza"> Pizza</label>
      <label><input type="checkbox" value="item_backpack"> Backpack</label>
      <label><input type="checkbox" value="item_large_backpack"> Large Backpack</label>
      <label><input type="checkbox" value="item_ruby"> Ruby</label>
      <label><input type="checkbox" value="item_gold_revolver"> Gold Revolver</label>
      <label><input type="checkbox" value="item_time_bomb"> Time Bomb</label>
      <label><input type="checkbox" value="item_egg"> Egg</label>
      <label><input type="checkbox" value="item_pelican_case"> Pelican Case (Suitcase)</label>
      <label><input type="checkbox" value="item_arena_shotgun"> Arena Shotgun</label>
      <label><input type="checkbox" value="item_arena_revolver"> Arena Revolver</label>
      <!-- Add more items as needed -->
    </div>

    <label>Hue: <span id="hueVal">0</span></label>
    <div class="row">
      <input type="range" id="hue" min="0" max="240" value="0" oninput="updateValue('hue')">
      <button onclick="randomHue()">ðŸŽ¨</button>
    </div>

    <label>Saturation: <span id="saturationVal">0</span></label>
    <div class="row">
      <input type="range" id="saturation" min="-124" max="124" value="0" oninput="updateValue('saturation')">
      <button onclick="randomSaturation()">ðŸŽ¨</button>
    </div>

    <label>Size: <span id="scaleVal">0</span></label>
    <div class="row">
      <input type="range" id="scale" min="-127" max="127" value="0" oninput="updateValue('scale')">
      <button onclick="randomScale()">ðŸŽ²</button>
    </div>

    <label>Rayguns per Backpack: <span id="raygunCountVal">1</span></label>
    <div class="row">
      <input type="range" id="raygunCount" min="1" max="28" value="1" oninput="updateValue('raygunCount')">
    </div>

    <label>Backpacks: <span id="countVal">1</span></label>
    <div class="row">
      <input type="range" id="count" min="1" max="28" value="1" oninput="updateValue('count')">
    </div>

    <label for="filename">Download As</label>
    <input type="text" id="filename" value="custom_items">

    <label>Color Preview</label>
    <div id="colorPreview"></div>

    <div class="row" style="justify-content: space-between;">
      <button onclick="downloadJSON()">Download</button>
      <button onclick="randomStuff()">ðŸŽ²</button>
    </div>
  </div> <!-- end of .container -->

  <script>
    function updateValue(id) {
      document.getElementById(id + 'Val').textContent = document.getElementById(id).value;
      updateColorPreview();
    }

    function updateColorPreview() {
      const hue = parseInt(document.getElementById("hue").value);
      const sat = parseInt(document.getElementById("saturation").value);
      const scaledSat = Math.round(((sat + 124) / 248) * 100);
      document.getElementById("colorPreview").style.backgroundColor = `hsl(${hue}, ${scaledSat}%, 50%)`;
    }

    function randomHue() {
      document.getElementById("hue").value = Math.floor(Math.random() * 241);
      updateValue("hue");
    }

    function randomSaturation() {
      document.getElementById("saturation").value = Math.floor(Math.random() * 249) - 124;
      updateValue("saturation");
    }

    function randomScale() {
      document.getElementById("scale").value = Math.floor(Math.random() * 255) - 127;
      updateValue("scale");
    }

    function randomStuff() {
      document.querySelectorAll('#itemList input').forEach(cb => cb.checked = Math.random() < 0.3);
      randomHue(); randomSaturation(); randomScale();
    }

    function filterItems() {
      const input = document.getElementById("searchInput").value.toLowerCase();
      const labels = document.querySelectorAll("#itemList label");
      labels.forEach(label => {
        label.style.display = label.textContent.toLowerCase().includes(input) ? "block" : "none";
      });
    }

    function downloadJSON() {
      const hue = parseInt(document.getElementById("hue").value);
      const saturation = parseInt(document.getElementById("saturation").value);
      const scale = parseInt(document.getElementById("scale").value);
      const raygunCount = parseInt(document.getElementById("raygunCount").value);
      const count = parseInt(document.getElementById("count").value);
      const filename = document.getElementById("filename").value || "custom_items";
      const selected = Array.from(document.querySelectorAll('#itemList input:checked')).map(cb => cb.value);

      const rays = [];
      for (let i = 0; i < raygunCount; i++) {
        for (const item of selected) {
          rays.push({
            itemID: "item_heart_gun",
            children: [
              {
                itemID: item,
                colorHue: hue,
                colorSaturation: saturation,
                scaleModifier: scale
              }
            ]
          });
        }
      }

      const raygunWithBackpack = {
        itemID: "item_heart_gun",
        children: [
          {
            itemID: "item_backpack_large_base",
            children: rays
          }
        ]
      };

      const output = {
        version: 1,
        items: [
          {
            itemID: "item_backpack_large_base",
            children: Array(count).fill(raygunWithBackpack),
            stashPos: 0
          }
        ]
      };

      const blob = new Blob([JSON.stringify(output, null, 4)], { type: "application/json" });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = filename + ".json";
      link.click();
    }
  </script>
</body>
</html>
